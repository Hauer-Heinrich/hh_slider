<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:hh="http://typo3.org/ns/HauerHeinrich/HhSlider/ViewHelpers"
    data-namespace-typo3-fluid="true">

<f:layout name="Default" />

<f:section name="Content">
    <div class="swiper-container swiper-container-{data.uid}">
        <div class="swiper-wrapper">
            <f:if condition="{data.tx_hhslider_content_type} == 1">
                <f:if condition="{data_assets}">
                    <f:for each="{data_assets}" as="file">
                        <div class="swiper-slide">
                            <f:if condition="{file.description}">
                                <figure>
                            </f:if>
                                <f:render partial="Media/Rendering/Image" arguments="{_all}" />
                            <f:if condition="{file.description}">
                                    <figcaption>
                                        <f:format.html>{file.description}</f:format.html>
                                    </figcaption>
                                </figure>
                            </f:if>
                        </div>
                    </f:for>
                </f:if>
            </f:if>

            <f:if condition="{data.tx_hhslider_content_type} == 2">
                <f:if condition="{data_tx_hhslider_child_content}">
                    <f:for each="{data_tx_hhslider_child_content}" as="content_item">
                        <div class="swiper-slide">
                            <f:cObject typoscriptObjectPath="tt_content" data="{content_item.data}" table="tt_content" />
                        </div>
                    </f:for>
                </f:if>
            </f:if>
        </div>

        <f:if condition="{data.tx_hhslider_pagination}">
            <div class="swiper-pagination"></div>
        </f:if>

        <f:if condition="{data.tx_hhslider_arrows}">
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </f:if>

        <f:comment>
        <!-- ToDO -->
        <!-- If we need scrollbar -->
        <div class="swiper-scrollbar"></div>
        </f:comment>

        <f:if condition="{data.tx_hhslider_thumbnails}">
            <f:then>
                <f:render partial="Thumbnails" arguments="{_all}" />
            </f:then>
        </f:if>
    </div>

    <hh:addAssetsData type="js">
        <script>
            window.addEventListener("load", function() {
                <f:comment></f:comment>var hhSlider{data.uid} = new Swiper('.swiper-container-{data.uid}', {
                    speed: <f:format.raw>{data.tx_hhslider_animation_speed}</f:format.raw>,
                    effect: '<f:format.raw>{data.tx_hhslider_animation}</f:format.raw>',
                    loop: {f:if(condition: '{data.tx_hhslider_loop}', then: 'true', else: 'false')},
                    centeredSlides: {f:if(condition: '{data.tx_hhslider_centered_slides}', then: 'true', else: 'false')},

                    <f:if condition="{data.tx_hhslider_autoplay}">
                        autoplay: {
                            delay:<f:format.raw>{data.tx_hhslider_autoplay_speed}</f:format.raw>,
                            disableOnInteraction: {f:if(condition: '{data.tx_hhslider_disable_on_interaction}', then: 'true', else: 'false')},
                        },
                    </f:if>

                    slidesPerView: <f:format.raw>{data.tx_hhslider_slides_per_view}</f:format.raw>,
                    navigation: {
                        nextEl: 'swiper-button-next',
                        prevEl: 'swiper-button-prev',
                    },
                    <f:if condition="{data.tx_hhslider_thumbnails}">
                        thumbs: {
                            <f:comment></f:comment>swiper: "hhSliderGallery{data.uid}"
                        },
                    </f:if>
                    direction: '{data.tx_hhslider_animation_direction}'
                });
            });
        </script>
    </hh:addAssetsData>
</f:section>

</html>
