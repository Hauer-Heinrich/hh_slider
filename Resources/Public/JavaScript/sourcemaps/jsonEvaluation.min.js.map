{"version":3,"sources":["jsonEvaluation.js"],"names":["isJsonString","str","JSON","parse","e","jsonEvaluation","fieldForEvaluation","fieldValue","value","length","style","border","require","Notification","error","document","addEventListener","querySelector"],"mappings":"AAIA,QAASA,CAAAA,YAAT,CAAsBC,GAAtB,CAA2B,CACvB,GAAI,CACAC,IAAI,CAACC,KAAL,CAAWF,GAAX,CACH,CAAC,MAAOG,CAAP,CAAU,CACR,QACH,CAED,QACH,CAOD,GAAIC,CAAAA,cAAc,CAAG,SAASC,kBAAT,CAA6B,CAC9C,GAAIC,CAAAA,UAAU,CAAGD,kBAAkB,CAACE,KAApC,CAD8C,MAItB,EAApB,CAAAD,UAAU,CAACE,MAAX,EAAyB,IAAAT,YAAY,CAACO,UAAD,CAJK,EAK1CD,kBAAkB,CAACI,KAAnB,CAAyBC,MAAzB,CAAkC,eALQ,CAQ1CC,OAAO,CAAC,CAAC,gCAAD,CAAD,CAAqC,SAASC,YAAT,CAAuB,CAC/DA,YAAY,CAACC,KAAb,CAAmB,0BAAnB,CAA+C,6CAA/C,CAA8F,CAA9F,CACH,CAFM,CARmC,MAe9CR,kBAAkB,CAACI,KAAnB,CAAyBC,MAAzB,CAAkC,EAfY,IAkBjD,CAlBD,CAoBAI,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,CAA8C,UAAY,CACtD,GAAIV,CAAAA,kBAAkB,CAAGS,QAAQ,CAACE,aAAT,CAAuB,iDAAvB,CAAzB,CAEAX,kBAAkB,CAACU,gBAAnB,CAAoC,UAApC,CAAgD,UAAgB,CAAEX,cAAc,CAACC,kBAAD,CAAuB,CAAvG,IAHsD,CAItDA,kBAAkB,CAACU,gBAAnB,CAAoC,UAApC,CAAgD,UAAgB,CAAEX,cAAc,CAACC,kBAAD,CAAuB,CAAvG,IACH,CALD,C","sourcesContent":["/**\n * Returns bool if given string is JSON or not\n * @param {string} str\n */\nfunction isJsonString(str) {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * Check if a field has a value and check if this value is JSON\n * return bool and TYPO3 notification - mark this field visually\n * @param {object} fieldForEvaluation\n */\nvar jsonEvaluation = function(fieldForEvaluation) {\n    var fieldValue = fieldForEvaluation.value;\n\n    // if field has a value and this value is not JSON\n    if (fieldValue.length > 0 && isJsonString(fieldValue) == false) {\n        fieldForEvaluation.style.border = \"1px solid red\";\n\n        // TYPO3 Notification backend\n        require(['TYPO3/CMS/Backend/Notification'], function(Notification) {\n            Notification.error('Slider option responsive', 'Responsive field value is not a valid json!', 5);\n        });\n\n        return false;\n    }\n\n    fieldForEvaluation.style.border = \"\";\n\n    return true;\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", function(e) {\n    var fieldForEvaluation = document.querySelector(\"textarea[name$='[tx_hhslider_responsive_part]']\");\n\n    fieldForEvaluation.addEventListener(\"focusout\", function(event) { jsonEvaluation(fieldForEvaluation); }, false);\n    fieldForEvaluation.addEventListener(\"mouseout\", function(event) { jsonEvaluation(fieldForEvaluation); }, false);\n});\n"],"file":"../jsonEvaluation.min.js"}